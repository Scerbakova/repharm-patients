{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/patients.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../confirmation-modal/confirmation-modal.component\";\nimport * as i4 from \"../../pipes/bool-representation.pipe\";\nfunction TableComponent_table_5_th_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const headName_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(headName_r6);\n  }\n}\nfunction TableComponent_table_5_tr_5_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prop_r11 = ctx.$implicit;\n    const item_r7 = i0.ɵɵnextContext().$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.getProperty(item_r7, prop_r11));\n  }\n}\nfunction TableComponent_table_5_tr_5_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r7.doctorsName + \" \" + item_r7.doctorsSurname);\n  }\n}\nfunction TableComponent_table_5_tr_5_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\", 13);\n    i0.ɵɵlistener(\"click\", function TableComponent_table_5_tr_5_ng_container_7_Template_td_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const item_r7 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.onDeleteClick($event, item_r7));\n    });\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction TableComponent_table_5_tr_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 10);\n    i0.ɵɵlistener(\"click\", function TableComponent_table_5_tr_5_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.openModal(item_r7));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, TableComponent_table_5_tr_5_td_3_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelement(4, \"td\", 11);\n    i0.ɵɵpipe(5, \"boolRepresentation\");\n    i0.ɵɵtemplate(6, TableComponent_table_5_tr_5_ng_container_6_Template, 3, 1, \"ng-container\", 12);\n    i0.ɵɵtemplate(7, TableComponent_table_5_tr_5_ng_container_7_Template, 3, 0, \"ng-container\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r7.firstName + \" \" + item_r7.lastName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.properties);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(5, 5, item_r7.insurance), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.isDoctorName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.isDoctorName);\n  }\n}\nfunction TableComponent_table_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 6)(1, \"thead\", 7)(2, \"tr\");\n    i0.ɵɵtemplate(3, TableComponent_table_5_th_3_Template, 2, 1, \"th\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"tbody\");\n    i0.ɵɵtemplate(5, TableComponent_table_5_tr_5_Template, 8, 7, \"tr\", 9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.head);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.data);\n  }\n}\nfunction TableComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No data found\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TableComponent_app_confirmation_modal_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-confirmation-modal\", 14);\n    i0.ɵɵlistener(\"confirm\", function TableComponent_app_confirmation_modal_8_Template_app_confirmation_modal_confirm_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.confirmDelete());\n    })(\"cancel\", function TableComponent_app_confirmation_modal_8_Template_app_confirmation_modal_cancel_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.cancelDelete());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport class TableComponent {\n  constructor(patientsService) {\n    this.patientsService = patientsService;\n    this.isModalOpen = false;\n    this.passPatient = new EventEmitter();\n  }\n  getProperty(item, prop) {\n    return item[prop];\n  }\n  openModal(item) {\n    this.isModalOpen = true;\n    this.passPatient.emit(item);\n  }\n  deletePatient(item) {\n    this.patientsService.deletePatient(item.id).subscribe({\n      next: () => {\n        this.data = this.data?.filter(patient => patient.id !== item.id);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n  confirmDelete() {\n    if (this.confirmDeletePatient) {\n      this.deletePatient(this.confirmDeletePatient);\n      this.confirmDeletePatient = undefined;\n    }\n  }\n  cancelDelete() {\n    this.confirmDeletePatient = undefined;\n  }\n  onDeleteClick(event, item) {\n    console.log('delete');\n    event.stopPropagation();\n    this.confirmDeletePatient = item;\n  }\n}\nTableComponent.ɵfac = function TableComponent_Factory(t) {\n  return new (t || TableComponent)(i0.ɵɵdirectiveInject(i1.PatientsService));\n};\nTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TableComponent,\n  selectors: [[\"app-table\"]],\n  inputs: {\n    title: \"title\",\n    tableDescription: \"tableDescription\",\n    data: \"data\",\n    head: \"head\",\n    properties: \"properties\",\n    isDoctorName: \"isDoctorName\",\n    isModalOpen: \"isModalOpen\"\n  },\n  outputs: {\n    passPatient: \"passPatient\"\n  },\n  decls: 9,\n  vars: 5,\n  consts: [[1, \"m-3\", \"table__container\"], [1, \"mb-3\"], [\"id\", \"tableDescription\"], [\"aria-describedby\", \"tableDescription\", \"class\", \"table\", 4, \"ngIf\", \"ngIfElse\"], [\"noData\", \"\"], [3, \"confirm\", \"cancel\", 4, \"ngIf\"], [\"aria-describedby\", \"tableDescription\", 1, \"table\"], [1, \"patients__table\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"table__row\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"table__row\", 3, \"click\"], [3, \"innerHTML\"], [4, \"ngIf\"], [3, \"click\"], [3, \"confirm\", \"cancel\"]],\n  template: function TableComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"small\", 2);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, TableComponent_table_5_Template, 6, 2, \"table\", 3);\n      i0.ɵɵtemplate(6, TableComponent_ng_template_6_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(8, TableComponent_app_confirmation_modal_8_Template, 1, 0, \"app-confirmation-modal\", 5);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(7);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.tableDescription);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.data == null ? null : ctx.data.length)(\"ngIfElse\", _r1);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.confirmDeletePatient);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ConfirmationModalComponent, i4.BoolRepresentationPipe],\n  styles: [\".table__container[_ngcontent-%COMP%] {\\n  overflow-x: auto;\\n}\\n\\n.patients__table[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n  text-align: start;\\n}\\n\\n.table__row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .patients__table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  border: 1px solid #dee2e6;\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy90YWJsZS90YWJsZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0FBQ0Y7O0FBRUE7RUFDRSx5QkFBQTtFQUNELGVBQUE7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi50YWJsZV9fY29udGFpbmVyIHtcbiAgb3ZlcmZsb3cteDogYXV0bztcbn1cblxuLnBhdGllbnRzX190YWJsZSB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB0ZXh0LWFsaWduOiBzdGFydDtcbn1cblxuLnRhYmxlX19yb3cgdGQsIC5wYXRpZW50c19fdGFibGUgdGgge1xuICBib3JkZXI6IDFweCBzb2xpZCAjZGVlMmU2O1xuXHRjdXJzb3I6IHBvaW50ZXI7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","i0","TableComponent","constructor","patientsService","getProperty","item","prop","openModal","isModalOpen","passPatient","emit","deletePatient","id","subscribe","next","data","filter","patient","error","err","console","log","confirmDelete","confirmDeletePatient","undefined","cancelDelete","onDeleteClick","event","stopPropagation","selectors","inputs","title","tableDescription","head","properties","isDoctorName","outputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\User\\Desktop\\repharm-patients\\ClientApp\\src\\app\\components\\table\\table.component.ts","C:\\Users\\User\\Desktop\\repharm-patients\\ClientApp\\src\\app\\components\\table\\table.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Patient } from 'src/app/models/patient.model';\nimport { PatientsService } from 'src/app/services/patients.service';\n\n@Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.scss'],\n})\nexport class TableComponent {\n  @Input() title?: string;\n  @Input() tableDescription?: string;\n  @Input() data?: Patient[];\n  @Input() head?: string[];\n  @Input() properties?: string[];\n  @Input() isDoctorName?: boolean;\n  @Input() isModalOpen: boolean = false;\n\n  @Output() passPatient = new EventEmitter<Patient>();\n\n  confirmDeletePatient?: Patient;\n\n  constructor(private patientsService: PatientsService) {}\n\n  getProperty(item: any, prop: string): any {\n    return item[prop as keyof Patient];\n  }\n\n  openModal(item: Patient) {\n    this.isModalOpen = true;\n    this.passPatient.emit(item);\n  }\n\n  deletePatient(item: Patient) {\n    this.patientsService.deletePatient(item.id).subscribe({\n      next: () => {\n        this.data = this.data?.filter((patient) => patient.id !== item.id);\n      },\n      error: (err) => {\n        console.log(err);\n      },\n    });\n  }\n\n  confirmDelete() {\n    if (this.confirmDeletePatient) {\n      this.deletePatient(this.confirmDeletePatient);\n      this.confirmDeletePatient = undefined;\n    }\n  }\n\n  cancelDelete() {\n    this.confirmDeletePatient = undefined;\n  }\n\n  onDeleteClick(event: Event, item: Patient) {\n    console.log('delete')\n    event.stopPropagation();\n    this.confirmDeletePatient = item;\n  }\n}\n","<div class=\"m-3 table__container\">\n  <h1 class=\"mb-3\">{{ title }}</h1>\n  <small id=\"tableDescription\">{{ tableDescription }}</small>\n  <table aria-describedby=\"tableDescription\" class=\"table\" *ngIf=\"data?.length; else noData\">\n    <thead class=\"patients__table\">\n      <tr>\n        <th *ngFor=\"let headName of head\">{{ headName }}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr (click)=\"openModal(item)\" class=\"table__row\" *ngFor=\"let item of data\">\n        <td>{{ item.firstName + \" \" + item.lastName }}</td>\n        <td *ngFor=\"let prop of properties\">{{ getProperty(item, prop)}}</td>\n        <td [innerHTML]=\"item.insurance | boolRepresentation\"></td>\n        <ng-container *ngIf=\"isDoctorName\">\n          <td>{{ item.doctorsName + \" \" + item.doctorsSurname }}</td>\n        </ng-container>\n        <ng-container *ngIf=\"isDoctorName\">\n          <td (click)=\"onDeleteClick($event, item)\">delete</td>\n        </ng-container>\n      </tr>\n    </tbody>\n  </table>\n  <ng-template #noData>\n    <p>No data found</p>\n  </ng-template>\n  <app-confirmation-modal\n  *ngIf=\"confirmDeletePatient\"\n  (confirm)=\"confirmDelete()\"\n  (cancel)=\"cancelDelete()\"\n></app-confirmation-modal>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}